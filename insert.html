<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CodeTazer Docs - Insert User</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #272822;
      color: #f8f8f2;
      margin: 0;
      padding: 20px;
    }

    h1,
    h2 {
      color: #66d9ef;
    }

    p {
      color: #f8f8f2;
    }

    .section {
      margin-bottom: 40px;
    }

    .db-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }

    .db-table th,
    .db-table td {
      border: 1px solid #555;
      padding: 10px;
      text-align: left;
    }

    .db-table th {
      background-color: #3e3d32;
      color: #f92672;
    }

    .db-table td {
      background-color: #49483e;
      color: #a6e22e;
    }

    pre {
      background-color: #272822;
      padding: 15px;
      border-radius: 5px;
      overflow-x: auto;
    }

    code {
      font-family: monospace;
      font-size: 14px;
      color: #f8f8f2;
      line-height: 1.4em;
    }

    /* Monokai Syntax Colors */
    .comment {
      color: #75715e;
      font-style: italic;
    }

    .keyword {
      color: #f92672;
    }

    .string {
      color: #e6db74;
    }

    .function {
      color: #a6e22e;
    }

    .variable {
      color: #fd971f;
    }

    .tag {
      color: #f92672;
    }

    .attr {
      color: #a6e22e;
    }

    .val {
      color: #e6db74;
    }

    .selector {
      color: #a6e22e;
    }

    .property {
      color: #66d9ef;
    }

    .cssval {
      color: #e6db74;
    }
  </style>
</head>

<body>
  <h1>ðŸ“˜ CodeTazer Insert Data to DB</h1>
  <p>This page explains how to insert data into the <b>User</b> table using <b>CodeTazer</b> framework.</p>

  <div class="section">
    <h2>ðŸ—„ Database Structure</h2>
    <table class="db-table">
      <tr>
        <th>Column</th>
        <th>Type</th>
        <th>Options</th>
      </tr>
      <tr>
        <td>id</td>
        <td>Primary Key</td>
        <td>Auto Increment</td>
      </tr>
      <tr>
        <td>username</td>
        <td>varchar</td>
        <td>Required</td>
      </tr>
      <tr>
        <td>password</td>
        <td>varchar</td>
        <td>Required</td>
      </tr>
      <tr>
        <td>fullname</td>
        <td>varchar</td>
        <td>Required</td>
      </tr>
      <tr>
        <td>status</td>
        <td>int(11)</td>
        <td>Default = 1</td>
      </tr>
    </table>
  </div>

  <div class="section">
    <h2>âš™ Backend Code (PHP)</h2>
    <pre><code><span class="comment">&lt;?php // route: user/add</span>

<span class="keyword">use</span> Classes\Request; <span class="comment">// Handle HTTP request input</span>
<span class="keyword">use</span> Classes\Response; <span class="comment">// Build and send API responses</span>
<span class="keyword">use</span> Tables\User; <span class="comment">// Model for interacting with "User" table</span>

$username = Request::post(<span class="string">"username"</span>); <span class="comment">// Get "username" from form</span>
$password = Request::post(<span class="string">"password"</span>); <span class="comment">// Get "password" from form</span>
$fullname = Request::post(<span class="string">"fullname"</span>); <span class="comment">// Get "fullname" from form</span>

<span class="keyword">if</span> (! $username) {
    Response::code(404)-&gt;message(<span class="string">"Username is required"</span>)-&gt;send(); <span class="comment">// Validate username</span>
}

<span class="keyword">if</span> (! $password) {
    Response::code(404)-&gt;message(<span class="string">"Password is required"</span>)-&gt;send(); <span class="comment">// Validate password</span>
}

<span class="keyword">if</span> (! $fullname) {
    Response::code(404)-&gt;message(<span class="string">"Fullname is required"</span>)-&gt;send(); <span class="comment">// Validate fullname</span>
}

$result = User::insert([ <span class="comment">// Insert new user row into DB</span>
    <span class="string">"username"</span> =&gt; $username,
    <span class="string">"password"</span> =&gt; $password,
    <span class="string">"fullname"</span> =&gt; $fullname,
]);

Response::code(200)-&gt;message(<span class="string">"User added"</span>)-&gt;send(); <span class="comment">// Return success response</span></code></pre>
  </div>

  <div class="section">
    <h2>ðŸ’» Frontend Code (HTML + JS)</h2>
    <pre><code><span class="comment">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attr">lang</span>=<span class="val">"en"</span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attr">charset</span>=<span class="val">"UTF-8"</span><span class="tag">&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attr">name</span>=<span class="val">"viewport"</span> <span class="attr">content</span>=<span class="val">"width=device-width, initial-scale=1.0"</span><span class="tag">&gt;</span>
  <span class="tag">&lt;title&gt;</span>Document<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;form</span> <span class="attr">id</span>=<span class="val">"adduser"</span><span class="tag">&gt;</span>
    <span class="tag">&lt;div&gt;&lt;input</span> <span class="attr">type</span>=<span class="val">"text"</span> <span class="attr">name</span>=<span class="val">"username"</span><span class="tag">&gt;&lt;/div&gt;</span>
    <span class="tag">&lt;div&gt;&lt;input</span> <span class="attr">type</span>=<span class="val">"text"</span> <span class="attr">name</span>=<span class="val">"password"</span><span class="tag">&gt;&lt;/div&gt;</span>
    <span class="tag">&lt;div&gt;&lt;input</span> <span class="attr">type</span>=<span class="val">"text"</span> <span class="attr">name</span>=<span class="val">"fullname"</span><span class="tag">&gt;&lt;/div&gt;</span>
  <span class="tag">&lt;/form&gt;</span>
<span class="tag">&lt;/body&gt;</span>

&lt;?= import_packages(<span class="string">"tyrux"</span>, <span class="string">"twal"</span>, <span class="string">"ctr"</span>) ?&gt;

<span class="tag">&lt;script&gt;</span>
  addEventListener(<span class="string">"DOMContentLoaded"</span>, () =&gt; { <span class="comment">// Run when page is fully loaded</span>
    CTR.submit(<span class="string">"#adduser"</span>, (data) =&gt; { <span class="comment">// Attach submit handler to #adduser form</span>
      tyrax.post({ <span class="comment">// Send POST request with Tyrux</span>
        url: <span class="string">"user/add"</span>, <span class="comment">// Target backend route</span>
        request: data, <span class="comment">// Send form data automatically</span>
        response: (send) =&gt; { <span class="comment">// Handle backend response</span>
          <span class="keyword">if</span> (send.code == 200) { <span class="comment">// If success</span>
            twal.ok(send.message).then(() =&gt; location.reload()); <span class="comment">// Show success popup then reload</span>
          } <span class="keyword">else</span> { <span class="comment">// If error</span>
            twal.err(send.message); <span class="comment">// Show error popup</span>
          }
        }
      })
    });
  });
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
  </div>

</body>

</html>
